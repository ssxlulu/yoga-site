<!--
  Custom Video List Blox for Hugo Blox
  竖屏9:16视频卡片风格，卡片更大，横向滑动体验更好
-->
{{ $block := .wcBlock | default . }}
{{ $data := $block.content | default .Params }}
{{ $title := $data.title }}
{{ $subtitle := $data.subtitle }}
{{ $videos := $data.videos }}

<section class="video-list-section py-12">
  <div class="container mx-auto">
    {{ with $title }}<h2 class="text-3xl font-bold text-center mb-2">{{ . }}</h2>{{ end }}
    {{ with $subtitle }}<p class="text-center text-lg mb-8">{{ . }}</p>{{ end }}
    <div class="relative">
      {{ $videoCount := len $videos }}
      <div class="relative">
        {{ if gt $videoCount 5 }}
        <button type="button" class="video-arrow left-0" onclick="scrollVideoList(-1)">
          <svg class="w-8 h-8 text-gray-700" fill="currentColor" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </button>
        <button type="button" class="video-arrow right-0" onclick="scrollVideoList(1)">
          <svg class="w-8 h-8 text-gray-700" fill="currentColor" viewBox="0 0 24 24"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg>
        </button>
        {{ end }}
        <div id="video-list-scroll" class="overflow-x-auto">
          <div class="flex gap-8 pb-4 flex-nowrap">
            {{ range $videos }}
            <div class="relative min-w-[220px] sm:min-w-[240px] md:min-w-[260px] lg:min-w-[280px] xl:min-w-[300px] max-w-[340px] group cursor-pointer">
              <div class="aspect-[9/16] w-full rounded-2xl overflow-hidden shadow-xl bg-gray-200 relative">
                <img class="w-full h-full object-cover transition-transform group-hover:scale-105" src="https://img.youtube.com/vi/{{ .id }}/maxresdefault.jpg" alt="{{ .title }}" />
                <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/60">
                  <svg class="w-16 h-16 text-white opacity-80" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                </div>
                <a href="https://www.youtube.com/watch?v={{ .id }}" target="_blank" class="absolute inset-0 z-10" aria-label="{{ .title }}"></a>
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4">
                  <h3 class="text-white text-lg font-semibold truncate">{{ .title }}</h3>
                </div>
              </div>
              {{ with .description }}
              <div class="mt-2 text-sm text-gray-600 dark:text-gray-300 text-center line-clamp-2">{{ . }}</div>
              {{ end }}
            </div>
            {{ end }}
          </div>
        </div>
      </div>
      <!-- 指示圆点 -->
      <div class="flex justify-center mt-4 gap-2">
        {{ range $i, $v := $videos }}
        <span class="w-2 h-2 rounded-full bg-gray-300 inline-block"></span>
        {{ end }}
      </div>
    </div>
  </div>
</section>
<style>
.aspect-\[9\/16\] { aspect-ratio: 9/16; }
.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2; }
.video-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 20;
  background: rgba(255,255,255,0.8);
  border-radius: 9999px;
  padding: 0.25rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  transition: background 0.2s;
}
.video-arrow:hover { background: #f3f4f6; }
.video-arrow.left-0 { left: -2rem; }
.video-arrow.right-0 { right: -2rem; }
@media (max-width: 1024px) {
  .video-arrow.left-0 { left: 0.25rem; }
  .video-arrow.right-0 { right: 0.25rem; }
}
</style>
<script>
function scrollVideoList(dir) {
  const el = document.getElementById('video-list-scroll');
  if (!el) return;
  const scrollAmount = el.offsetWidth * 0.8;
  el.scrollBy({ left: dir * scrollAmount, behavior: 'smooth' });
}
</script>
