<!--
  Custom Gallery Blox for Hugo Blox
  批量展示图片，支持自适应布局
-->
{{/* Hugo Blox: Gallery */}}
{{ $block := .wcBlock | default . }}
{{ $data := $block.content | default .Params }}
{{ $title := $data.title }}
{{ $subtitle := $data.subtitle }}
{{ $images := $data.images }}

<section class="gallery-section">
  <style>
    .custom-gallery-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      grid-auto-flow: dense;
    }
    @media (min-width: 640px) {
      .custom-gallery-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    @media (min-width: 1024px) {
      .custom-gallery-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    .custom-gallery-item {
      overflow: hidden;
      border-radius: 0.75rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: box-shadow 0.3s;
      position: relative;
    }
    .custom-gallery-item:hover {
      box-shadow: 0 6px 24px rgba(0,0,0,0.16);
    }
    .custom-gallery-item img {
      width: 100%;
      height: 12rem;
      object-fit: cover;
      transition: transform 0.3s;
    }
    .custom-gallery-item:hover img {
      transform: scale(1.07);
    }
    /* 让第1张图片更大 */
    .custom-gallery-item:nth-child(1) {
      grid-column: span 2;
      grid-row: span 2;
      height: 100%;
    }
    .custom-gallery-item:nth-child(1) img {
      height: 100%;
      min-height: 24rem;
    }
    /* 让每隔4张图片也变大，错落有致 */
    .custom-gallery-item:nth-child(7n+4) {
      grid-column: span 2;
      grid-row: span 2;
    }
    .custom-gallery-item:nth-child(7n+4) img {
      height: 100%;
      min-height: 20rem;
    }
  </style>
  <div class="container mx-auto py-12">
    {{ with $title }}<h2 class="text-3xl font-bold text-center mb-2">{{ . }}</h2>{{ end }}
    {{ with $subtitle }}<p class="text-center text-lg mb-8">{{ . }}</p>{{ end }}
    <div class="custom-gallery-grid">
      {{ range $images }}
      <div class="custom-gallery-item">
        <img src="{{ .src }}" alt="{{ .alt | default "pic" }}" loading="lazy">
      </div>
      {{ end }}
    </div>
  </div>
</section>
